{% extends 'base.html' %}


{% load account %}
{% load static %}

{% block extended_head %}
    <link rel="stylesheet" type="text/css" href="{% static 'calendar/css/calendar.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'calendar/css/view_modes.css' %}">

    <script type="text/javascript" src="{% static 'calendar/js/main.js' %}"></script>
    <script type="text/javascript" src="{% static 'calendar/js/week_view.js' %}"></script>
    <script type="text/javascript" src="{% static 'calendar/js/day_view.js' %}"></script>
    <script type="text/javascript" src="{% static 'calendar/js/month_view.js' %}"></script>
    <script type="text/javascript" src="{% static 'calendar/js/view_manager.js' %}"></script>
{% endblock %}

{% block content %}

    <script type="text/javascript">
        window.VIEW_MODE = {{ view_mode }};
        window.IS_SIDEBAR_ON = {{ is_sidebar_on }};
    </script>

    <div class="wrapper">

        <!-- navbar -->
        <nav class="top-bar">

            <!-- fixed navbar section -->
            <div id="hideElem" class="navbar-fixed-section-wrapper">

                <!-- collapse sidebar button container -->
                <div class="collapse-button-container">
                    <button class="transp-button" id="sidebarCollapse">
                        <ion-icon class="icons" name="menu"></ion-icon>
                    </button>
                </div>

                <!--TODAY button container -->
                <div class="today-button-container">
                    <button id="todayBtn" class="btn btn-outline-secondary">Today</button>
                </div>

                <!--VIEW SCROLL buttons container -->
                <div class="viewscroll-buttons-container">
                    <button id="moveBack" class="transp-button">
                        <ion-icon class="icons" name="ios-arrow-back"></ion-icon>
                    </button>
                    <button id="moveForward" class="transp-button">
                        <ion-icon class="icons" name="ios-arrow-forward"></ion-icon>
                    </button>
                </div>

                <!--data label container -->
                <div class="date-label-container">
                    <label id="dateInfo"></label>
                </div>

            </div>

            <!-- search panel-->
            <div id="searchPanel" class="searchPanel">
            </div>

            <!-- flexible navbar section -->
            <div class="navbar-fixible-section-wrapper">

                <!-- search button -->
                <button id="searchButton" class="transp-button">
                    <ion-icon class="icons" name="ios-search"></ion-icon>
                </button>

                <!-- settings button -->
                <button data-toggle="modal" data-target="#settingsModal" data-backdrop="static" class="transp-button">
                    <ion-icon class="icons" name="ios-cog"></ion-icon>
                </button>

                <!-- view selector -->
                <select id="viewSelector">
                    <option value="0">Day</option>
                    <option value="1">Week</option>
                    <option value="2">Month</option>
                </select>

                <!-- view selector initialization ("selected" item according user last used mode) -->
                <script type="text/javascript">
                    $("#viewSelector option[value=" + VIEW_MODE + "]").attr('selected', true);
                </script>

                <!-- user profile settings button -->
                <button data-toggle="modal" data-target="#userModal" data-backdrop="static" class="transp-button">
                    <ion-icon class="icons" name="ios-contact"></ion-icon>
                </button>

            </div>

        </nav>

        <!-- working area -->
        <div class="working-area-wrapper">
            {% csrf_token %}
            <!-- left bar -->
            <nav id="sidebar">
                <button class="btn btn-outline-dark createEventButton">+Create Event</button>
                <div id="calendar"></div>
                <table id="calendar2" class="noselect">
                    <thead>
                    <tr><td id="calendarArrow">‹<td id="dateHeader" colspan="5"><td id="calendarArrow">›
                    <tr><td>Mo<td>Tu<td>We<td>Th<td>Fr<td>Sa<td>Su
                    <tbody>
                </table>
                <div class="inboxOuterBorder">
                    <div class="form-control inboxLabelContainer">
                    <label><p class="inboxLabel">Inbox</p></label>
                    </div>
                <div class="row">
                    <button id="addTask"><img src="https://img.icons8.com/android/24/000000/plus.png" height="10" width="10"></img></button>
                    <input name="taskName" id="taskName" type="text" placeholder="type name of task">
                </div>
                <div id="taskInbox" class="form-control">
                </div>
                </div>
            </nav>

            <!-- current view display -->
            <div id="content" class="noselect">

            </div>
            <!-- sidebar initial state -->
            <script type="text/javascript">
                if (!IS_SIDEBAR_ON) {
                    $('#sidebar, #content').toggleClass('active');
                    $('.timeline-item, .timemark').toggleClass('act');
                }
            </script>
        </div>

    </div>

    <!-- modal windows appending -->
    {% include 'user_profile.html' %}
    {% include 'settings_modal.html' %}

    <!-- event creation dialog appending -->
    {% include 'event_creation_dialog.html' %}

{% endblock %}